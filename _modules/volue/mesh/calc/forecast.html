

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>volue.mesh.calc.forecast &mdash; volue.mesh 1.7.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> volue.mesh
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Welcome</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../quickstart.html">Quickstart guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction_to_mesh.html">An introduction to Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../hydsim.html">HydSim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../authentication.html">Client authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tests.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">Versions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SDK Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../api.html">API documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">volue.mesh</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>volue.mesh.calc.forecast</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for volue.mesh.calc.forecast</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Mesh calculation forecast functions</span>
<span class="sd">*************************************</span>

<span class="sd">For more information see :ref:`mesh_functions:forecast`.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">volue.mesh</span> <span class="kn">import</span> <span class="n">Timeseries</span>
<span class="kn">from</span> <span class="nn">volue.mesh.calc.common</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">_Calculation</span><span class="p">,</span>
    <span class="n">_convert_datetime_to_mesh_calc_format</span><span class="p">,</span>
    <span class="n">_parse_single_timeseries_response</span><span class="p">,</span>
    <span class="n">_parse_timeseries_list_response</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">_ForecastFunctionsBase</span><span class="p">(</span><span class="n">_Calculation</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for all forecast function classes.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_get_all_forecasts_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an expression for `get_all_forecasts` using a search query.</span>

<span class="sd">        Args:</span>
<span class="sd">            search_query: A search formulated using the :doc:`Mesh search language &lt;mesh_search&gt;`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Mesh calculation expression.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="s2">&quot;## = @GetAllForecasts(@t(&quot;</span>
        <span class="k">if</span> <span class="n">search_query</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">search_query</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s2">))</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">expression</span>

    <span class="k">def</span> <span class="nf">_get_forecast_expression</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">forecast_start_min</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">],</span>
        <span class="n">forecast_start_max</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">],</span>
        <span class="n">available_at_timepoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">],</span>
        <span class="n">search_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an expression for `get_forecasts` using a search query.</span>

<span class="sd">        Args:</span>
<span class="sd">            forecast_start_min: Forecast must start after this time.</span>
<span class="sd">            forecast_start_max: Forecast must start before this time.</span>
<span class="sd">            available_at_timepoint: Forecast that is valid at the given timestamp.</span>
<span class="sd">            search_query: A search formulated using the :doc:`Mesh search language &lt;mesh_search&gt;`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Mesh calculation expression.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">forecast_start_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">forecast_start_max</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;parameter `forecast_start_min` is provided, it requires providing also `forecast_start_max`&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">forecast_start_min</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">forecast_start_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;parameter `forecast_start_max` is provided, it requires providing also `forecast_start_min`&quot;</span>
            <span class="p">)</span>

        <span class="n">expression</span> <span class="o">=</span> <span class="s2">&quot;## = @GetForecast(@t(&quot;</span>
        <span class="k">if</span> <span class="n">search_query</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">search_query</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s2">)&quot;</span>

        <span class="k">if</span> <span class="n">forecast_start_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">converted_forecast_start_min</span> <span class="o">=</span> <span class="n">_convert_datetime_to_mesh_calc_format</span><span class="p">(</span>
                <span class="n">forecast_start_min</span>
            <span class="p">)</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s2">,&#39;</span><span class="si">{</span><span class="n">converted_forecast_start_min</span><span class="si">}</span><span class="s2">&#39;&quot;</span>

        <span class="k">if</span> <span class="n">forecast_start_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">converted_forecast_start_max</span> <span class="o">=</span> <span class="n">_convert_datetime_to_mesh_calc_format</span><span class="p">(</span>
                <span class="n">forecast_start_max</span>
            <span class="p">)</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s2">,&#39;</span><span class="si">{</span><span class="n">converted_forecast_start_max</span><span class="si">}</span><span class="s2">&#39;&quot;</span>

        <span class="k">if</span> <span class="n">available_at_timepoint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">converted_available_at_timepoint</span> <span class="o">=</span> <span class="n">_convert_datetime_to_mesh_calc_format</span><span class="p">(</span>
                <span class="n">available_at_timepoint</span>
            <span class="p">)</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s2">,&#39;</span><span class="si">{</span><span class="n">converted_available_at_timepoint</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">expression</span>

    <span class="c1"># Interface</span>
    <span class="c1"># abstractmethod does not take into account if method is async or not</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_all_forecasts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Timeseries</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all forecasts for a given Mesh object in a time interval.</span>
<span class="sd">        The `target` and the time interval (`start_time` and `end_time`) are set by :py:func:`volue.mesh.Connection.Session.forecast_functions`.</span>

<span class="sd">        Example:</span>
<span class="sd">            If interval &#39;P&#39; is given for the Mesh object in the picture below, 10 forecasted time series will be returned.</span>

<span class="sd">            .. image:: images/calc_get_all_forecasts.png</span>
<span class="sd">               :width: 400</span>

<span class="sd">        Note:</span>
<span class="sd">            The resulting objects from the `search_query` will be used in the `get_all_forecasts` function, if `search_query` is not set the `target` will be used.</span>

<span class="sd">        Args:</span>
<span class="sd">            search_query: A search formulated using the :doc:`Mesh search language &lt;mesh_search&gt;`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An array of forecast time series with values within the relevant period. Values in forecast series outside the period are not included. The function returns an empty array if no forecast time series have values within the relevant period.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_forecast</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">forecast_start_min</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">forecast_start_max</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">available_at_timepoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">search_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeseries</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get one forecast for a given Mesh object in a time interval.</span>

<span class="sd">        The `target`and the time interval (`start_time` and `end_time`) are set by :py:func:`volue.mesh.Connection.Session.forecast_functions`.</span>

<span class="sd">        Example 1:</span>
<span class="sd">            Use `available_at_timepoint` (t\ :sub:`c`) to get the forecast.</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">                forecast_funcs = session.forecast_functions(full_name, start_time, end_time)</span>
<span class="sd">                result = forecast_funcs.get_forecast(available_at_timepoint)</span>

<span class="sd">            .. image:: images/calc_get_forecast_writetime.png</span>
<span class="sd">               :width: 400</span>

<span class="sd">        Example 2:</span>
<span class="sd">            Use `forecast_start_min` (t\ :sub:`0min`) and `forecast_start_max` (t\ :sub:`0max`) to get the forecast that starts in that interval.</span>

<span class="sd">            Note: This will ignore `start_time` set by :py:func:`volue.mesh.Connection.Session.forecast_functions`</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">                forecast_funcs = session.forecast_functions(full_name, start_time, end_time)</span>
<span class="sd">                result = forecast_funcs.get_forecast(forecast_start_min, forecast_start_max)</span>

<span class="sd">            .. image:: images/calc_get_forecast_interval.png</span>
<span class="sd">               :width: 400</span>


<span class="sd">        Note:</span>
<span class="sd">            * The function can take `available_at_timepoint` without specifying `forecast_start_min` and `forecast_start_min`.</span>
<span class="sd">            * The function can take `forecast_start_min` and `forecast_start_min` with or without specifying `available_at_timepoint` to find the relevant forecast instead of using the start of the requested period (defined in `forecast_functions`). It requires that the forecast series&#39; start is less than or equal to `forecast_start_max` and larger than `forecast_start_min`.</span>
<span class="sd">            * If no forecast series has its start time within the given interval, the function returns a time series with NaN.</span>
<span class="sd">            * The resulting objects from the `search_query` will be used in the `get_all_forecasts` function, if `search_query` is not set the `target` will be used.</span>

<span class="sd">        Args:</span>
<span class="sd">            forecast_start_min: Forecast must start after this time.</span>
<span class="sd">            forecast_start_max: Forecast must start before this time.</span>
<span class="sd">            available_at_timepoint: Forecast that is valid at the given timestamp.</span>
<span class="sd">            search_query: A search formulated using the :doc:`Mesh search language &lt;mesh_search&gt;`.</span>

<span class="sd">        See Also:</span>
<span class="sd">            :ref:`mesh_client:Date times and time zones`</span>

<span class="sd">        Returns:</span>
<span class="sd">            A time series forecast.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>


<div class="viewcode-block" id="ForecastFunctions"><a class="viewcode-back" href="../../../../mesh_functions.html#volue.mesh.calc.forecast.ForecastFunctions">[docs]</a><span class="k">class</span> <span class="nc">ForecastFunctions</span><span class="p">(</span><span class="n">_ForecastFunctionsBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for forecast functions that should be run synchronously&quot;&quot;&quot;</span>

<div class="viewcode-block" id="ForecastFunctions.get_all_forecasts"><a class="viewcode-back" href="../../../../mesh_functions.html#volue.mesh.calc.forecast.ForecastFunctions.get_all_forecasts">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_forecasts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Timeseries</span><span class="p">]:</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_get_all_forecasts_expression</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_parse_timeseries_list_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="ForecastFunctions.get_forecast"><a class="viewcode-back" href="../../../../mesh_functions.html#volue.mesh.calc.forecast.ForecastFunctions.get_forecast">[docs]</a>    <span class="k">def</span> <span class="nf">get_forecast</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">forecast_start_min</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">forecast_start_max</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">available_at_timepoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">search_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeseries</span><span class="p">:</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_get_forecast_expression</span><span class="p">(</span>
            <span class="n">forecast_start_min</span><span class="p">,</span> <span class="n">forecast_start_max</span><span class="p">,</span> <span class="n">available_at_timepoint</span><span class="p">,</span> <span class="n">search_query</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_parse_single_timeseries_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ForecastFunctionsAsync"><a class="viewcode-back" href="../../../../mesh_functions.html#volue.mesh.calc.forecast.ForecastFunctionsAsync">[docs]</a><span class="k">class</span> <span class="nc">ForecastFunctionsAsync</span><span class="p">(</span><span class="n">_ForecastFunctionsBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for forecast functions that should be run asynchronously&quot;&quot;&quot;</span>

<div class="viewcode-block" id="ForecastFunctionsAsync.get_all_forecasts"><a class="viewcode-back" href="../../../../mesh_functions.html#volue.mesh.calc.forecast.ForecastFunctionsAsync.get_all_forecasts">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_all_forecasts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">search_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Timeseries</span><span class="p">]:</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_get_all_forecasts_expression</span><span class="p">(</span><span class="n">search_query</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_parse_timeseries_list_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="ForecastFunctionsAsync.get_forecast"><a class="viewcode-back" href="../../../../mesh_functions.html#volue.mesh.calc.forecast.ForecastFunctionsAsync.get_forecast">[docs]</a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_forecast</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">forecast_start_min</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">forecast_start_max</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">available_at_timepoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">search_query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timeseries</span><span class="p">:</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_get_forecast_expression</span><span class="p">(</span>
            <span class="n">forecast_start_min</span><span class="p">,</span> <span class="n">forecast_start_max</span><span class="p">,</span> <span class="n">available_at_timepoint</span><span class="p">,</span> <span class="n">search_query</span>
        <span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">run_async</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_parse_single_timeseries_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Volue AS.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>