

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Mesh session &mdash; volue.mesh 1.13.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Mesh server" href="mesh_server.html" />
    <link rel="prev" title="Rating curves" href="mesh_rating_curve.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> volue.mesh
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Welcome</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="introduction_to_mesh.html">An introduction to Mesh</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mesh_concepts.html">Mesh concepts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="mesh_server.html">Mesh server</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Mesh session</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#timeout">Timeout</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mesh_client.html">Mesh Python SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hydsim.html">HydSim</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Client authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="versions.html">Versions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SDK Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">volue.mesh</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="introduction_to_mesh.html">An introduction to Mesh</a> &raquo;</li>
        
          <li><a href="mesh_concepts.html">Mesh concepts</a> &raquo;</li>
        
      <li>Mesh session</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/mesh_session.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mesh-session">
<h1>Mesh session<a class="headerlink" href="#mesh-session" title="Permalink to this heading">¶</a></h1>
<p>A session can be viewed as temporary workspace where changes will not be affected by, or affect other users, that work with the system until changes are committed and pushed out of the session and into where shared resources are stored.</p>
<p>A Mesh server will normally have many separate sessions open at any given time. Using the Python API is just on way of working with sessions. A session should be created and closed after finishing work.</p>
<p>When a session has been created the user can interact with the Mesh model, search for and retrieve data (like time series or information about object) and perform calculations using <a class="reference internal" href="mesh_functions.html"><span class="doc">functions</span></a> among other things.</p>
<p>If the connection is lost it is possible to reconnect to the server and attach to a open session using a session identifier. If a user does not close a session manually it will time out and will be closed after a specific time, but this might steal resources and should be avoided.</p>
<p>Trying to connect to a session with a session id that is no longer valid will result in an error.</p>
<p>The following example shows some different ways of working with sessions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">helpers</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">volue.mesh</span><span class="w"> </span><span class="kn">import</span> <span class="n">Connection</span>


<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">tls_root_pem_cert</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Showing different ways of working with sessions.&quot;&quot;&quot;</span>

    <span class="c1"># For production environments create connection using: with_tls, with_kerberos, or with_external_access_token, e.g.:</span>
    <span class="c1"># connection = Connection.with_tls(address, tls_root_pem_cert)</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">Connection</span><span class="o">.</span><span class="n">insecure</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

    <span class="c1"># 1. Create a session, open and close session.</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">create_session</span><span class="p">()</span>
    <span class="n">session</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. You now have a new open session&quot;</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c1"># 2. Create session using the with statement.</span>
    <span class="c1"># Session will be created, opened and closed within the &#39;with&#39; statement scope</span>
    <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">create_session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. You now have a new open session&quot;</span><span class="p">)</span>

    <span class="c1"># 3. Connecting to a potentially open session.</span>
    <span class="c1"># Session ids can be found in the session object:</span>
    <span class="c1"># session.session_id</span>
    <span class="c1"># Note: If the session_id is not the id of an open session,</span>
    <span class="c1"># the server will create a new one for you.</span>
    <span class="c1"># Set the session id you want to connect to</span>
    <span class="n">session_id</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="s2">&quot;123e4567-e89b-12d3-a456-556642440000&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;3. Session id you want to connect to: </span><span class="si">{</span><span class="n">session_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">connect_to_session</span><span class="p">(</span><span class="n">session_id</span><span class="p">)</span>
    <span class="c1"># Try connecting to that session id, if it does not exist, a new one will be created without warning</span>
    <span class="n">session</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s2">&quot;3. You have now an open session, either the one you requested or a new one if it did not exist&quot;</span>
    <span class="p">)</span>
    <span class="c1"># Check which session you are connected to and close it</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;3. Session id you are to connect to: </span><span class="si">{</span><span class="n">session</span><span class="o">.</span><span class="n">session_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">address</span><span class="p">,</span> <span class="n">tls_root_pem_cert</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">get_connection_info</span><span class="p">()</span>
    <span class="n">main</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">tls_root_pem_cert</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="timeout">
<h2>Timeout<a class="headerlink" href="#timeout" title="Permalink to this heading">¶</a></h2>
<p>Each session that has been <strong>inactive</strong> for some period of time will be
automatically closed on the server side. This period is called session timeout.
Currently the session timeout for gRPC sessions is set to 5 minutes.</p>
<p>The session timeout is counted from the moment where handling of the last
request made using that session was completed. So, if you are using a session
for longer period than the session timeout, but you are actively making calls
to, for example read time series points, then the session will not timeout.</p>
<p>In cases where a session needs to be preserved, but the inactivity periods are
longer, then the user needs to make explicit calls using that session.</p>
<p>To make working with Mesh via Python SDK more user-friendly the extension of
session lifetime is handled automatically by the Mesh Python SDK. So as long
as you have an opened session, the Python SDK will send automatically calls to
extend the session lifetime in the background.</p>
<p>In very limited and special use case where you want to connect to already
existing and opened session via <a class="reference internal" href="api.html#volue-mesh"><span class="std std-ref">volue.mesh</span></a>.Connection.connect_to_session
Python SDK will not automatically extend the lifetime of the session. In such
case the user needs to make explicit calls. This is because tracking of an open
session that needs automatic lifetime extension is started when it is open via
Python’s <a class="reference internal" href="api.html#volue-mesh"><span class="std std-ref">volue.mesh</span></a>.Connection.Session object.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mesh_server.html" class="btn btn-neutral float-right" title="Mesh server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="mesh_rating_curve.html" class="btn btn-neutral float-left" title="Rating curves" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2024, Volue AS.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>